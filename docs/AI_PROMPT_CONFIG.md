# AI 提示词自定义配置说明

## 概述

dify_chat_tester 项目现在支持通过配置文件自定义 AI 系统提示词,无需修改代码即可调整 AI 对话行为。

## 配置系统提示词

在 `.env.config` 文件中添加或修改 `SYSTEM_PROMPT` 配置项。

### 支持的占位符

- `{role}`: 当前用户选择的角色（如"员工"、"门店"、"客服"等）

## 使用示例

### 1. 更专业的 AI 助手

```ini
SYSTEM_PROMPT=你是一位经验丰富的{role}，拥有10年行业经验。请提供详细、专业的建议，并在回答时引用相关的最佳实践。
```

### 2. 更简洁的回答风格

```ini
SYSTEM_PROMPT=你是{role}，请用简洁明了的语言回答问题，避免冗长的解释。每个回答控制在3-5句话以内。
```

### 3. 特定领域专家

```ini
# 电商领域
SYSTEM_PROMPT=你是一个专注于电商领域的{role}。你了解电商运营、客户服务、物流管理的最佳实践。请以友好、专业的方式回答问题。

# IT技术支持
SYSTEM_PROMPT=你是一个IT技术支持{role}。你精通常见的技术问题排查方法，能够用通俗易懂的语言解释技术概念。请耐心、详细地回答问题。

# 医疗健康顾问
SYSTEM_PROMPT=你是一个医疗健康{role}。你了解基本的健康知识和医疗常识，但会提醒用户对于严重症状需要就医。请以关怀、专业的态度回答问题。
```

### 4. 多语言支持

```ini
# 英文
SYSTEM_PROMPT=You are an AI assistant. Current role: {role}. Please answer questions in a professional and friendly manner.

# 日文
SYSTEM_PROMPT=あなたはAIアシスタントです。現在の役割：{role}。専門的で親切な方法で質問に答えてください。
```

### 5. 添加特定约束

```ini
# 强调安全和隐私
SYSTEM_PROMPT=你是{role}。在回答问题时，请特别注意用户隐私和信息安全。不要要求或存储敏感个人信息。请以专业、友好的方式回答问题。

# 强调合规性
SYSTEM_PROMPT=你是{role}。你的回答必须符合公司政策和行业法规。如果遇到涉及法律或合规的问题，请建议用户咨询相关专业人士。请以专业、友好的方式回答问题。
```

## 配置优先级

1. **环境变量** `SYSTEM_PROMPT`: 最高优先级
2. **.env.config 文件**: 项目配置文件
3. **默认值**: "你是一个 AI 助手。当前角色：{role}。请以专业、友好的方式回答问题。"

## 测试配置

```bash
# 测试系统提示词是否正确加载
uv run python -c "from dify_chat_tester.config.loader import ConfigLoader; cfg = ConfigLoader(); print(cfg.get_system_prompt('测试员工'))"
```

## 实际效果对比

### 默认提示词

```ini
SYSTEM_PROMPT=你是一个AI助手。当前角色：{role}。请以专业、友好的方式回答问题。
```

**用户**: 如何处理客户投诉？
**AI**: 处理客户投诉需要耐心倾听、表达理解、提供解决方案...

### 自定义提示词（更专业）

```ini
SYSTEM_PROMPT=你是一位拥有10年客服经验的{role}。请结合实际案例，提供具体可行的建议。
```

**用户**: 如何处理客户投诉？
**AI**: 根据我 10 年的客服经验，处理投诉的最佳实践是：

1. 首先在 30 秒内响应客户...
2. 使用"感同身受"技巧...
3. 提供至少 2 个解决方案...

## 注意事项

1. **占位符必须保留**: `{role}` 占位符必须保留在提示词中
2. **重启生效**: 修改配置后需要重启程序才能生效
3. **恢复默认**: 删除或注释掉 `SYSTEM_PROMPT` 配置项即可恢复默认提示词
4. **适度长度**: 提示词不宜过长，建议控制在 200 字以内，过长可能影响 AI 响应质量
5. **角色一致性**: 提示词应该与用户选择的角色保持一致性

## 常见问题

**Q: 修改提示词后没有生效?**
A: 确保已重启程序，配置文件的修改在程序运行时不会自动生效。

**Q: 可以移除 {role} 占位符吗?**
A: 可以，但不建议。移除后所有角色将使用相同的提示词，失去了角色区分的意义。

**Q: 提示词太长会有问题吗?**
A: 过长的提示词可能会占用 token 限制，影响 AI 的回答长度。建议保持简洁明了。
