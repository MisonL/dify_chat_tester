# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [1.3.0] - 2025-12-02

### 新增

- **智能日志系统**：改进日志目录检测逻辑，自动处理权限问题（优先程序目录，无权限时回退至用户目录）。
- **流式输出优化**：新增 `StreamDisplay` 组件，提供更友好的 AI 思考过程展示（带机器人图标和边框）。
- **Excel 导出增强**：生成的测试问题文件现在包含美化的表头和自动调整的列宽。

### 优化

- **配置管理重构**：统一供应商设置模块 (`provider_setup.py`) 的配置读取逻辑。
- **代码规范**：引入 `isort` 进行导入排序，统一代码格式。
- **文档完善**：大幅更新《用户使用指南》，补充了详细的环境准备、安装步骤和多种运行方式说明。

## [1.2.0] - 2025-12-01

### 新增

- 新增“AI 生成测试提问点”功能：支持读取指定目录下的 Markdown 文档，自动生成测试问题并导出为 Excel 文件。
- 完善了单元测试覆盖率。

### 修复

- 修复了 Dify 供应商识别逻辑，现在使用唯一 ID 而不是显示名称进行判断，解决了自定义名称导致多轮对话失效的问题。
- 修复了代码中的未使用的变量和导入，提升代码质量。
- 优化了终端 UI 的面板宽度一致性。

## [1.1.0] - 2025-11-21

### 新增

- 批量查询模式默认显示响应内容（Y/n）
- k2sonnet API 特殊支持和自动流式检测
- 流式响应失败自动回退机制

### 优化

- Dify 渠道实现真正的流式输出
- 改进流式响应解析，支持实时显示
- 增加请求超时时间到 60 秒
- 优化错误处理和异常信息

### 修复

- 修复 Dify 应用 ID 传递方式（通过 inputs 参数）
- 修复 OpenAI 兼容接口的流式处理问题
- 修复 iFlow 渠道的响应解析逻辑
- 修复代码质量问题（清理未使用导入）

### 清理

- 删除所有测试文件和调试文件
- 清理缓存目录和构建产物
- 优化项目结构，只保留核心文件

## [1.0.0] - 2025-11-14

### 新增

- 支持多 AI 供应商（Dify、OpenAI 兼容接口、iFlow）
- 会话模式：实时多轮对话，自动维护上下文
- 批量询问模式：从 Excel 文件批量处理问题
- 自动创建配置文件功能
- 跨平台打包支持（Windows 和 macOS）
- 完整的中文用户指南

### 功能特性

- AI 等待动画显示优化，避免信息截断
- 支持自定义角色和模型
- Excel 日志记录，包含时间戳、对话轮次等信息
- 批量请求间隔可配置
- 支持流式和非流式响应

### 技术改进

- 使用 uv 包管理器管理依赖
- PyInstaller 打包，生成独立可执行文件
- 智能配置文件路径检测（开发环境/打包环境）
- 完善的.gitignore 配置

### 文档

- 详细的用户使用指南
- 完整的 API 配置说明
- 故障排除指南

---

## 版本说明

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正
